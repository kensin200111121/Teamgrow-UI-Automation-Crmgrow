
const { expect, browser } = require('@wdio/globals');

const { goToPage, goToSubmenu } = require('./sidebar');
const delay = (ms) => {
    return new Promise(res => {
       setTimeout(() => {
        res()
       }, ms) 
    })
}


const testDealName = require('../test-data/testdata').testPrepare.pipeline.deal;
const testPipelineName = require('../test-data/testdata').testPrepare.pipeline.name;
const testContactName = require('../test-data/testdata').testPrepare.contact.name;
const testCommunityName = require('../test-data/testdata').testPrepare.community.name;
const testAutomationName = require('../test-data/testdata').testPrepare.automation.name;

describe('Test Data Setup', () => {
    describe('Preparation', async () => {
        it('Remove robots', async () => {
            await goToPage('automations')
            await $('span[data-name="profile-tab-item-My Automations List"]').click()
            await delay(3000)
            // Remove
            const robot1Exist = await $('span=robot-contact').isDisplayed()
            if(robot1Exist) {
                const robot1 = await $('span=robot-contact')
                const robot1Tr = await browser.custom$('closest', robot1)
                await robot1.scrollIntoView()
                await browser.execute(ele => {
                    ele.querySelector('input[type="checkbox"]').click();
                }, robot1Tr)
                await delay(3000)
                await $('div[data-name="material-action-item-Delete"]').scrollIntoView()
                await $('div[data-name="material-action-item-Delete"]').click()
                await $('app-confirm').waitForDisplayed({ timeout: 3000 })
                await $('app-confirm button[data-action="confirm-downgrade"]').click()
                await $('app-confirm').waitForDisplayed({ reverse: true })
                await delay(3000)
            }
            const robot2Exist = await $('span=robot-deal').isDisplayed()
            if(robot2Exist) {
                const robot2 = await $('span=robot-deal')
                const robot2Tr = await browser.custom$('closest', robot2)
                await robot2.scrollIntoView()
                await browser.execute(ele => {
                    ele.querySelector('input[type="checkbox"]').click();
                }, robot2Tr)
                await delay(3000)
                await $('div[data-name="material-action-item-Delete"]').scrollIntoView()
                await $('div[data-name="material-action-item-Delete"]').click()
                await $('app-confirm').waitForDisplayed({ timeout: 3000 })
                await $('app-confirm button[data-action="confirm-downgrade"]').click()
                await $('app-confirm').waitForDisplayed({ reverse: true })
                await delay(3000)
            }
            const robot3Exist = await $('span=robot-modular').isDisplayed()
            if(robot3Exist) {
                const robot3 = await $('span=robot-modular')
                const robot3Tr = await browser.custom$('closest', robot3)
                await robot3.scrollIntoView()
                await browser.execute(ele => {
                    ele.querySelector('input[type="checkbox"]').click();
                }, robot3Tr)
                await delay(3000)
                await $('div[data-name="material-action-item-Delete"]').scrollIntoView()
                await $('div[data-name="material-action-item-Delete"]').click()
                await $('app-confirm').waitForDisplayed({ timeout: 3000 })
                await $('app-confirm button[data-action="confirm-downgrade"]').click()
                await $('app-confirm').waitForDisplayed({ reverse: true })
                await delay(3000)
            }
            const robot4Exist = await $('span=robot-scheduler').isDisplayed()
            if(robot4Exist) {
                const robot4 = await $('span=robot-scheduler')
                const robot4Tr = await browser.custom$('closest', robot4)
                await robot4.scrollIntoView()
                await browser.execute(ele => {
                    ele.querySelector('input[type="checkbox"]').click();
                }, robot4Tr)
                await delay(3000)
                await $('div[data-name="material-action-item-Delete"]').scrollIntoView()
                await $('div[data-name="material-action-item-Delete"]').click()
                await $('app-confirm').waitForDisplayed({ timeout: 3000 })
                await $('app-confirm button[data-action="confirm-downgrade"]').click()
                await $('app-confirm').waitForDisplayed({ reverse: true })
                await delay(3000)
            }
            const robot5Exist = await $('span=robot-stage').isDisplayed()
            if(robot5Exist) {
                const robot5 = await $('span=robot-stage')
                const robot5Tr = await browser.custom$('closest', robot5)
                await robot5.scrollIntoView()
                await browser.execute(ele => {
                    ele.querySelector('input[type="checkbox"]').click();
                }, robot5Tr)
                await delay(3000)
                await $('div[data-name="material-action-item-Delete"]').scrollIntoView()
                await $('div[data-name="material-action-item-Delete"]').click()
                await $('app-confirm').waitForDisplayed({ timeout: 3000 })
                await $('app-confirm button[data-action="confirm-downgrade"]').click()
                await $('app-confirm').waitForDisplayed({ reverse: true })
                await delay(3000)
            }
        })
    })
})
describe('New Automation', () => {
    describe('Contact', () => {
        it('Create New Automation', async () => {
            await goToPage('automations')
            await $('button[data-action="create-new-automation"]').click()
            await $('input[name="automationTitle"]').setValue('robot-contact')
            await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 3000 })
            await $('span[data-name="profile-tab-item-Activity"]').click()
            await $('svg g.nodes g.node-group g.node foreignObject img').click()
            await $('app-add-action').waitForDisplayed({ timeout: 3000 })
            await $('li[data-name="add-action-type-email"]').click()
            // Email
            await $('select[name="period"]').selectByVisibleText('10 mins')
            await $('input[name="subject"]').setValue('new automation')
            await browser.execute((text) => {
                document.querySelector('quill-editor[data-name="deal-action-description"] .ql-editor').innerHTML = text;
            }, '<div>automation email description</div>');
            // await $('button[data-action="automation-action-add-material"]').click()
            // await $('app-material-browser-v2').waitForDisplayed({ timeout: 3000 })
            // const firstMaterial = await $('app-material-browser-v2 div.file-item:first-of-type')
            // await browser.execute(ele => {
            //     ele.querySelector('input[type="checkbox"]').click();
            // }, firstMaterial)
            // await $('app-material-browser-v2').$('button=Insert').click()
            // await $('app-material-browser-v2').waitForDisplayed({ reverse: true })
            await $('button[data-action="automation-add-action-insert-btn"]').click()
            await $('app-add-action').waitForDisplayed({ reverse: true })
            await $('button[data-action="automation-create"]').click()
            await delay(5000)
            await $('span[data-name="profile-tab-item-Activity"]').click()
            await expect($('button[data-action="automation-assign"]')).toBeDisplayed()
        })
        it('Assign', async () => {
            await $('button[data-action="automation-assign"]').click()
            await $('app-automation-assign').waitForDisplayed({ timeout: 5000 })
            await delay(3000)
            await $('app-select-contact mat-form-field').click()
            await delay(3000)
            await $('mat-option.contains-mat-select-search div.mat-typography input.mat-select-search-input').setValue('j')
            await $('div=' + testContactName).waitForClickable({ timeout: 9000 })
            await $('div=' + testContactName).click()
            await $('button[data-action="automation-assign-confirm"]').click()
            await $('app-automation-assign').waitForDisplayed({ reverse: true })
            await delay(5000)
            await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
            await expect($('span=' + testContactName)).toBeDisplayed()
            await delay(2000)
        })
        it('Check', async () => {
            await $('span=' + testContactName).click()
            await delay(5000)
            await $('app-contact-data-list-container div.data-sections-container div.accordion-item:nth-of-type(4) i.i-arrow-down').click()
            await delay(3000)
            await expect($('app-contact-data-list-container div.data-sections-container div.accordion-item:nth-of-type(4) app-automation-item:first-of-type div.title')).toHaveText('robot-contact')
            await delay(3000)
            // Stop
            await $('app-contact-data-list-container div.data-sections-container div.accordion-item:nth-of-type(4) app-automation-item:first-of-type div.title').click()
            await $('span=Stop').click()
            await delay(3000)
            const confirmDialog = await $('app-confirm').isDisplayed()
            if(confirmDialog) { 
                await $('button[data-action="confirm-downgrade"]').click()
                await delay(3000)
            }
        })
    })
    // describe('Pipeline Deal', () => {
    //     it('Create New Automation', async () => {
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await delay(3000)
    //         await $('button[data-action="create-new-automation"]').click()
    //         await $('input[name="automationTitle"]').setValue('robot-deal')
    //         await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 3000 })
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await $('svg g.nodes g.node-group g.node foreignObject img').click()
    //         await $('app-add-action').waitForDisplayed({ timeout: 3000 })
    //         await $('li[data-name="add-action-type-email"]').click()
    //         // Email
    //         await $('select[name="period"]').click()
    //         await $('select[name="period"] option[ng-reflect-value="0"]').click()
    //         await $('input[name="subject"]').setValue('new')
    //         await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div').setValue('automation email description')
    //         await $('button[data-action="automation-action-add-material"]').click()
    //         await $('app-material-browser').waitForDisplayed({ timeout: 3000 })
    //         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
    //         await $('button[data-action="automation-material-insert-btn"]').click()
    //         await $('app-material-browser').waitForDisplayed({ reverse: true })
    //         await $('button[data-action="automation-add-action-insert-btn"]').click()
    //         await $('app-add-action').waitForDisplayed({ reverse: true })
    //         // Contact
    //         await $('select[name="automation"]').click()
    //         await $('select[name="automation"] option[ng-reflect-value="deal"]').click()
    //         await $('button[data-action="automation-create"]').click()
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await expect($('button[data-action="automation-assign"]')).toBeDisplayed()
    //         await delay(2000)
    //     })
    //     it('Assign', async () => {
    //         await $('button[data-action="automation-assign"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
    //         await $('app-select-deal mat-form-field').click()
    //         await $('mat-option.contains-mat-select-search div.mat-typography input.mat-select-search-input').setValue('d')
    //         await $('div=' + testDealName).waitForClickable({ timeout: 5000 })
    //         await $('div=' + testDealName).click()
    //         await $('button[data-action="automation-assign-confirm"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ reverse: true })
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Assigned deals"]').click()
    //         await expect($('div=' + testDealName)).toBeDisplayed()
    //     })
    //     it('Check', async () => {
    //         await $('div[data-name="sidebar-item-pipeline"] > a').click()
    //         await delay(3000)
    //         await $(`div[data-name="pipeline-name-list"]`).click()
    //         await $(`div[data-name="pipeline-title-${testPipelineName}"]`).waitForClickable({ timeout: 2000 })
    //         await $(`div[data-name="pipeline-title-${testPipelineName}"]`).click()
    //         await $('div=' + testDealName).waitForClickable({ timeout: 3000 })
    //         await $('div=' + testDealName).click()
    //         await delay(3000)
    //         await $('span[data-name="deal-tab-item-TO-DO"]').click()
    //         await $('div.reload i.i-refresh').click()
    //         await delay(3000)
    //         await expect($('div=robot-deal')).toBeDisplayed()
    //         // Unassign
    //         await $('div.deal-info-panel div.automation div.automation-action i.i-automation-cancel').scrollIntoView()
    //         await $('div.deal-info-panel div.automation div.automation-action i.i-automation-cancel').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(3000)
    //         // Delete
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await $('span=robot-deal').waitForClickable({ timeout: 7000 })
    //         await $('span=robot-deal').click()
    //         await delay(3000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await delay(3000)
    //         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
    //         await $('button[data-action="automation-more"]').click()
    //         await $('button[data-action="automation-more-delete"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="automation-more-delete"]').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(2000)
    //     })
    // })
    // describe('Pipeline Stage', () => {
    //     it('Create New Automation', async () => {
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await delay(3000)
    //         await $('button[data-action="create-new-automation"]').click()
    //         await $('input[name="automationTitle"]').setValue('robot-stage')
    //         await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 3000 })
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await $('svg g.nodes g.node-group g.node foreignObject img').click()
    //         await $('app-add-action').waitForDisplayed({ timeout: 3000 })
    //         await $('li[data-name="add-action-type-email"]').click()
    //         // Email
    //         await $('select[name="period"]').click()
    //         await $('select[name="period"] option[ng-reflect-value="0"]').click()
    //         await $('input[name="subject"]').setValue('new')
    //         await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div').setValue('automation email description')
    //         await $('button[data-action="automation-action-add-material"]').click()
    //         await $('app-material-browser').waitForDisplayed({ timeout: 3000 })
    //         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
    //         await $('button[data-action="automation-material-insert-btn"]').click()
    //         await $('app-material-browser').waitForDisplayed({ reverse: true })
    //         await $('button[data-action="automation-add-action-insert-btn"]').click()
    //         await $('app-add-action').waitForDisplayed({ reverse: true })
    //         // Contact
    //         await $('select[name="automation"]').click()
    //         await $('select[name="automation"] option[ng-reflect-value="deal stage"]').click()
    //         await $('button[data-action="automation-create"]').click()
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await expect($('button[data-action="automation-assign"]')).toBeDisplayed()
    //     })
    //     it('Assign', async () => {
    //         await $('button[data-action="automation-assign"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
    //         await $('app-select-deal mat-form-field').click()
    //         await $('mat-option.contains-mat-select-search div.mat-typography input.mat-select-search-input').setValue('l') // Lead
    //         await $('div=' + testDealName).waitForClickable({ timeout: 5000 })
    //         await $('div=' + testDealName).click()
    //         await $('button[data-action="automation-assign-confirm"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ reverse: true })
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Assigned deals"]').click()
    //         await expect($('div=' + testDealName)).toBeDisplayed()
    //     })
    //     it('Check', async () => {
    //         await $('div[data-name="sidebar-item-pipeline"] > a').click()
    //         await delay(3000)
    //         await $('div[data-name="pipeline-name-list"]').click()
    //         await $(`div[data-name="pipeline-title-${testPipelineName}"]`).waitForClickable({ timeout: 2000 })
    //         await $(`div[data-name="pipeline-title-${testPipelineName}"]`).click()
    //         await $('div=' + testDealName).waitForClickable({ timeout: 3000 })
    //         await $('div=' + testDealName).click()
    //         await delay(3000)
    //         await $('span[data-name="deal-tab-item-TO-DO"]').click()
    //         await $('div.reload i.i-refresh').click()
    //         await delay(3000)
    //         await expect($('div=robot-stage')).toBeDisplayed()
    //         // Unassign
    //         await $('div.deal-info-panel div.automation div.automation-action i.i-automation-cancel').scrollIntoView()
    //         await $('div.deal-info-panel div.automation div.automation-action i.i-automation-cancel').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(3000)
    //         // Delete
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await $('span=robot-stage').waitForClickable({ timeout: 7000 })
    //         await $('span=robot-stage').click()
    //         await delay(3000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await delay(3000)
    //         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
    //         await $('button[data-action="automation-more"]').click()
    //         await $('button[data-action="automation-more-delete"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="automation-more-delete"]').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(2000)
    //     })
    // })
    // describe('Lead Capture', () => {
    //     it('Create New Automation', async () => {
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await delay(3000)
    //         await $('button[data-action="create-new-automation"]').click()
    //         await $('input[name="automationTitle"]').setValue('robot-lead-capture')
    //         await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 3000 })
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await $('svg g.nodes g.node-group g.node foreignObject img').click()
    //         await $('app-add-action').waitForDisplayed({ timeout: 3000 })
    //         await $('li[data-name="add-action-type-email"]').click()
    //         // Email
    //         await $('select[name="period"]').click()
    //         await $('select[name="period"] option[ng-reflect-value="0"]').click()
    //         await $('input[name="subject"]').setValue('new')
    //         await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div').setValue('automation email description')
    //         await $('button[data-action="automation-action-add-material"]').click()
    //         await $('app-material-browser').waitForDisplayed({ timeout: 3000 })
    //         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
    //         await $('button[data-action="automation-material-insert-btn"]').click()
    //         await $('app-material-browser').waitForDisplayed({ reverse: true })
    //         await $('button[data-action="automation-add-action-insert-btn"]').click()
    //         await $('app-add-action').waitForDisplayed({ reverse: true })
    //         // Contact
    //         await $('select[name="automation"]').click()
    //         await $('select[name="automation"] option[ng-reflect-value="lead capture"]').click()
    //         await $('button[data-action="automation-create"]').click()
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await expect($('button[data-action="automation-assign"]')).toBeDisplayed()
    //     })
    //     it('Assign', async () => {
    //         await $('button[data-action="automation-assign"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
    //         await $('app-select-contact mat-form-field').click()
    //         await $('mat-option.contains-mat-select-search div.mat-typography input.mat-select-search-input').setValue('j')
    //         await $('div=' + testContactName).waitForClickable({ timeout: 5000 })
    //         await $('div=' + testContactName).click()
    //         await $('button[data-action="automation-assign-confirm"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ reverse: true })
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
    //         await expect($('span=' + testContactName)).toBeDisplayed()
    //     })
    //     it('Check', async () => {
    //         await $('table tbody tr:first-of-type td.mat-column-contact_name span').click()
    //         await delay(5000)
    //         await $('span[data-name="deal-tab-item-TO-DO"]').click()
    //         await $('div.reload i.i-refresh').click()
    //         await delay(5000)
    //         await expect($('div=robot-lead-capture')).toBeDisplayed()
    //         // Unassign
    //         await $('div.contact-info-panel div.automation div.automation-action i.i-automation-cancel').scrollIntoView()
    //         await $('div.contact-info-panel div.automation div.automation-action i.i-automation-cancel').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(3000)
    //         // Delete
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await $('span=robot-lead-capture').waitForClickable({ timeout: 7000 })
    //         await $('span=robot-lead-capture').click()
    //         await delay(3000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await delay(3000)
    //         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
    //         await $('button[data-action="automation-more"]').click()
    //         await $('button[data-action="automation-more-delete"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="automation-more-delete"]').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(2000)
    //     })
    // })
    // describe('Scheduler', () => {
    //     it('Create New Automation', async () => {
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await delay(3000)
    //         await $('button[data-action="create-new-automation"]').click()
    //         await $('input[name="automationTitle"]').setValue('robot-scheduler')
    //         await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 3000 })
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await $('svg g.nodes g.node-group g.node foreignObject img').click()
    //         await $('app-add-action').waitForDisplayed({ timeout: 3000 })
    //         await $('li[data-name="add-action-type-email"]').click()
    //         // Email
    //         await $('select[name="period"]').click()
    //         await $('select[name="period"] option[ng-reflect-value="0"]').click()
    //         await $('input[name="subject"]').setValue('new')
    //         await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div').setValue('automation email description')
    //         await $('button[data-action="automation-action-add-material"]').click()
    //         await $('app-material-browser').waitForDisplayed({ timeout: 3000 })
    //         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
    //         await $('button[data-action="automation-material-insert-btn"]').click()
    //         await $('app-material-browser').waitForDisplayed({ reverse: true })
    //         await $('button[data-action="automation-add-action-insert-btn"]').click()
    //         await $('app-add-action').waitForDisplayed({ reverse: true })
    //         // Contact
    //         await $('select[name="automation"]').click()
    //         await $('select[name="automation"] option[ng-reflect-value="scheduler"]').click()
    //         await $('button[data-action="automation-create"]').click()
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await expect($('button[data-action="automation-assign"]')).toBeDisplayed()
    //         await delay(3000)
    //     })
    //     it('Assign', async () => {
    //         await $('button[data-action="automation-assign"]').waitForClickable({ timeout: 5000 })
    //         await $('button[data-action="automation-assign"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
    //         await $('app-select-contact mat-form-field').click()
    //         await $('mat-option.contains-mat-select-search div.mat-typography input.mat-select-search-input').setValue('j')
    //         await $('div=' + testContactName).waitForClickable({ timeout: 5000 })
    //         await $('div=' + testContactName).click()
    //         await $('button[data-action="automation-assign-confirm"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ reverse: true })
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
    //         await expect($('span=' + testContactName)).toBeDisplayed()
    //     })
    //     it('Check', async () => {
    //         // await $('table tbody tr:first-of-type td.mat-column-contact_name span').click()
    //         const contactElement = await $('span=' + testContactName)
    //         const contactTr = await browser.custom$('closest', contactElement)
    //         await contactTr.$('td.mat-column-contact_name span').click()
    //         await delay(5000)
    //         await $('span[data-name="deal-tab-item-TO-DO"]').click()
    //         await $('div.reload i.i-refresh').click()
    //         await delay(5000)
    //         await expect($('div=robot-scheduler')).toBeDisplayed()
    //         // Unassign
    //         await $('div.contact-info-panel div.automation div.automation-action i.i-automation-cancel').scrollIntoView()
    //         await $('div.contact-info-panel div.automation div.automation-action i.i-automation-cancel').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(3000)
    //         // Delete
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await $('span=robot-scheduler').waitForClickable({ timeout: 7000 })
    //         await $('span=robot-scheduler').click()
    //         await delay(3000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await delay(3000)
    //         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
    //         await $('button[data-action="automation-more"]').click()
    //         await $('button[data-action="automation-more-delete"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="automation-more-delete"]').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(2000)
    //     })
    // })
    // describe('Smart Code', () => {
    //     it('Create New Automation', async () => {
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await delay(3000)
    //         await $('button[data-action="create-new-automation"]').click()
    //         await $('input[name="automationTitle"]').setValue('robot-smart-code')
    //         await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 3000 })
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await $('svg g.nodes g.node-group g.node foreignObject img').click()
    //         await $('app-add-action').waitForDisplayed({ timeout: 3000 })
    //         await $('li[data-name="add-action-type-email"]').click()
    //         // Email
    //         await $('select[name="period"]').click()
    //         await $('select[name="period"] option[ng-reflect-value="0"]').click()
    //         await $('input[name="subject"]').setValue('new')
    //         await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div').setValue('automation email description')
    //         await $('button[data-action="automation-action-add-material"]').click()
    //         await $('app-material-browser').waitForDisplayed({ timeout: 3000 })
    //         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
    //         await $('button[data-action="automation-material-insert-btn"]').click()
    //         await $('app-material-browser').waitForDisplayed({ reverse: true })
    //         await $('button[data-action="automation-add-action-insert-btn"]').click()
    //         await $('app-add-action').waitForDisplayed({ reverse: true })
    //         // Contact
    //         await $('select[name="automation"]').click()
    //         await $('select[name="automation"] option[ng-reflect-value="smart code"]').click()
    //         await $('button[data-action="automation-create"]').click()
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await expect($('button[data-action="automation-assign"]')).toBeDisplayed()
    //     })
    //     it('Assign', async () => {
    //         await $('button[data-action="automation-assign"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
    //         await $('app-select-contact mat-form-field').click()
    //         await $('mat-option.contains-mat-select-search div.mat-typography input.mat-select-search-input').setValue('j')
    //         await $('div=' + testContactName).waitForClickable({ timeout: 5000 })
    //         await $('div=' + testContactName).click()
    //         await $('button[data-action="automation-assign-confirm"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ reverse: true })
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
    //         await expect($('span=' + testContactName)).toBeDisplayed()
    //     })
    //     it('Check', async () => {
    //         // await $('table tbody tr:first-of-type td.mat-column-contact_name span').click()
    //         const contactElement = await $('span=' + testContactName)
    //         const contactTr = await browser.custom$('closest', contactElement)
    //         await contactTr.$('td.mat-column-contact_name span').click()
    //         await delay(5000)
    //         await $('span[data-name="deal-tab-item-TO-DO"]').click()
    //         await $('div.reload i.i-refresh').click()
    //         await delay(5000)
    //         await expect($('div=robot-smart-code')).toBeDisplayed()
    //         // Unassign
    //         await $('div.contact-info-panel div.automation div.automation-action i.i-automation-cancel').scrollIntoView()
    //         await $('div.contact-info-panel div.automation div.automation-action i.i-automation-cancel').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(3000)
    //         // Delete
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await $('span=robot-smart-code').waitForClickable({ timeout: 7000 })
    //         await $('span=robot-smart-code').click()
    //         await delay(3000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await delay(3000)
    //         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
    //         await $('button[data-action="automation-more"]').click()
    //         await $('button[data-action="automation-more-delete"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="automation-more-delete"]').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(2000)
    //     })
    // })
    // describe('Modular', () => {
    //     it('Create New Automation', async () => {
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await delay(3000)
    //         await $('button[data-action="create-new-automation"]').click()
    //         await $('input[name="automationTitle"]').setValue('robot-modular')
    //         await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 3000 })
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await $('svg g.nodes g.node-group g.node foreignObject img').click()
    //         await $('app-add-action').waitForDisplayed({ timeout: 3000 })
    //         await $('li[data-name="add-action-type-email"]').click()
    //         // Email
    //         await $('select[name="period"]').click()
    //         await $('select[name="period"] option[ng-reflect-value="0"]').click()
    //         await $('input[name="subject"]').setValue('new')
    //         await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div').setValue('automation email description')
    //         await $('button[data-action="automation-action-add-material"]').click()
    //         await $('app-material-browser').waitForDisplayed({ timeout: 3000 })
    //         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
    //         await $('button[data-action="automation-material-insert-btn"]').click()
    //         await $('app-material-browser').waitForDisplayed({ reverse: true })
    //         await $('button[data-action="automation-add-action-insert-btn"]').click()
    //         await $('app-add-action').waitForDisplayed({ reverse: true })
    //         // Contact
    //         await $('select[name="automation"]').click()
    //         await $('select[name="automation"] option[ng-reflect-value="modular"]').click()
    //         await $('label[for="template-type-email"]').click()
    //         await $('button[data-action="automation-create"]').click()
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await expect($('button[data-action="automation-assign"]')).toBeDisplayed()
    //     })
    //     it('Assign', async () => {
    //         await $('button[data-action="automation-assign"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
    //         await $('app-select-contact mat-form-field').click()
    //         await $('mat-option.contains-mat-select-search div.mat-typography input.mat-select-search-input').setValue('j')
    //         await $('div=' + testContactName).waitForClickable({ timeout: 5000 })
    //         await $('div=' + testContactName).click()
    //         await $('button[data-action="automation-assign-confirm"]').click()
    //         await $('app-automation-assign').waitForDisplayed({ reverse: true })
    //         await delay(5000)
    //         await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
    //         await expect($('span=' + testContactName)).toBeDisplayed()
    //     })
    //     it('Check', async () => {
    //         // await $('table tbody tr:first-of-type td.mat-column-contact_name span').click()
    //         const contactElement = await $('span=' + testContactName)
    //         const contactTr = await browser.custom$('closest', contactElement)
    //         await contactTr.$('td.mat-column-contact_name span').click()
    //         await delay(5000)
    //         await $('span[data-name="deal-tab-item-TO-DO"]').click()
    //         await $('div.reload i.i-refresh').click()
    //         await delay(5000)
    //         await expect($('div=robot-modular')).toBeDisplayed()
    //         // Unassign
    //         await $('div.contact-info-panel div.automation div.automation-action i.i-automation-cancel').scrollIntoView()
    //         await $('div.contact-info-panel div.automation div.automation-action i.i-automation-cancel').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(3000)
    //         // Delete
    //         await $('div[data-name="sidebar-item-automations"] > a').click()
    //         await $('span=robot-modular').waitForClickable({ timeout: 7000 })
    //         await $('span=robot-modular').click()
    //         await delay(3000)
    //         await $('span[data-name="profile-tab-item-Activity"]').click()
    //         await delay(3000)
    //         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
    //         await $('button[data-action="automation-more"]').click()
    //         await $('button[data-action="automation-more-delete"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="automation-more-delete"]').click()
    //         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
    //         await $('button[data-action="confirm-downgrade"]').click()
    //         await delay(2000)
    //     })
    // })
})
// describe('Update Automation', () => {
//     it('Update', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await delay(3000)
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await $('span=robot-contact').waitForClickable({ timeout: 5000 })
//         await $('span=robot-contact').click()
//         await $('span[data-name="profile-tab-item-Activity"]').click()
//         await $('div.card-body').waitForDisplayed({ timeout: 5000 })
//         // assign
//         await $('button[data-action="automation-assign"]').click()
//         await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
//         await $('app-select-contact mat-form-field').click()
//         await $('mat-option.contains-mat-select-search div.mat-typography input.mat-select-search-input').setValue('j')
//         await $('div=' + testContactName).waitForClickable({ timeout: 5000 })
//         await $('div=' + testContactName).click()
//         await $('button[data-action="automation-assign-confirm"]').click()
//         await $('app-automation-assign').waitForDisplayed({ reverse: true })
//         // Update
//         await $('span[data-name="profile-tab-item-Activity"]').click()
//         await $('svg g.nodes g.node-group:last-of-type g.node foreignObject div.cardContainer:last-of-type img').click()
//         await $('app-add-action').waitForDisplayed({ timeout: 3000 })
//         await $('li[data-name="add-action-type-follow_up"]').click()
//         await expect($('app-add-action mat-dialog-actions div.options-container > div:first-of-type')).toHaveTextContaining('Will you update to those contact automation either?')
//         await $('textarea[name="followUpContent"]').setValue('Write down feedback')
//         await $('button=Insert').click()
//         await $('app-add-action').waitForDisplayed({ reverse: true })
//         await expect($('label=New Task')).toBeDisplayed()
//         await delay(3000)
//     })
//     it('Delete', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await delay(3000)
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await $('span=robot-contact').waitForClickable({ timeout: 5000 })
//         await $('span=robot-contact').click()
//         await $('span[data-name="profile-tab-item-Activity"]').click()
//         await $('svg g.nodes g.node-group:last-of-type g.node foreignObject div.cardContainer:first-of-type img').waitForClickable({ timeout: 5000 })
//         await $('svg g.nodes g.node-group:last-of-type g.node foreignObject div.cardContainer:first-of-type img').click()
//         await $('app-automation-detail-overlay i.i-trash').waitForClickable({ timeout: 5000 })
//         await $('app-automation-detail-overlay i.i-trash').click()
//         await $('button=Yes, Delete').click()
//         await delay(2000)
//         await expect($('label=New Task')).not.toBeDisplayed()
//     })
// })
// describe('Download', () => {
//     it('One', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await delay(3000)
//         await $('span[data-name="profile-tab-item-Automations Library"]').click()
//         await delay(5000)
//         const automationTitle = $('app-automations-library table tbody tr:nth-last-of-type(4) td.mat-column-title span').getText()
//         await $('app-automations-library table tbody tr:nth-last-of-type(4) td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('div[data-name="material-action-item-Download"]').click()
//         await $('app-confirm').waitForDisplayed({ timeout: 5000 })
//         await expect($('app-confirm h1')).toHaveText('Download Automations')
//         await $('button[data-action="confirm-downgrade"]').click()
//         await $('app-confirm').waitForDisplayed({ reverse: true })
//         await delay(5000)
//     })
//     it('team', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await delay(3000)
//         await $('span[data-name="profile-tab-item-Automations Library"]').click()
//         await delay(3000)
//         await $('app-automations-library table tbody tr:first-of-type td.mat-column-title i.i-folder').click()
//         await delay(3000)
//         const teamAutomationExist = await $('app-automations-library table tbody tr:first-of-type th.mat-column-select div.custom-checkbox').isDisplayed()
//         if(teamAutomationExist) {
//             await $('app-automations-library table thead tr:first-of-type(2) th.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('app-actions-header div[data-name="material-action-item-Download"]').waitForClickable({ timeout: 5000 })
//             await $('app-actions-header div[data-name="material-action-item-Download"]').click()
//             await $('app-confirm').waitForDisplayed({ timeout: 5000 })
//             await expect($('app-confirm h1')).toHaveText('Download Automations')
//             await $('button[data-action="confirm-downgrade"]').click()
//             await $('app-confirm').waitForDisplayed({ reverse: true })
//             await delay(5000)
//         }
//     })
//     it.skip('Remove Downloaded automations', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(2000)
//         await $('table tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('table tr:nth-of-type(3) td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('table tr:nth-last-of-type(2) td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 3000 })
//         await $('table tr:nth-last-of-type(2) td.mat-column-select div.custom-checkbox').scrollIntoView()
//         await $('table tr:nth-last-of-type(2) td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('table tr:nth-last-of-type(4) td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('div[data-name="material-action-item-Delete"]').click()
//         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
//         await $('button[data-action="confirm-downgrade"]').click()
//         await delay(5000)
//         const removeAutomationDialog = await $('app-confirm-remove-automation').isDisplayed()
//         if(removeAutomationDialog) {
//             await $('app-confirm-remove-automation i.i-close').click()
//         }
//         await delay(5000)
//     })
// })
// describe('Clone', () => {
//     it('First', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await delay(3000)
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await $('table tbody tr:first-of-type td.mat-column-title span').moveTo()
//         await $('table tbody tr:first-of-type i.i-menu-more').click()
//         await $('table tbody tr:first-of-type td.mat-column-actions button[data-action="automation-drop-clone"]').waitForClickable({ timeout: 3000 })
//         await $('table tbody tr:first-of-type td.mat-column-actions button[data-action="automation-drop-clone"]').click()
//         await $('input[name="automationTitle"]').waitForDisplayed({ timeout: 5000 })
//         await $('input[name="automationTitle"]').setValue('clone')
//         await $('button[data-action="automation-create"]').click()
//         await delay(5000)
//         await $('div[data-name="sidebar-item-automations"]').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(2000)
//         await expect($('span=clone')).toBeDisplayed()
//         await delay(4000)
//         await $('span=clone').click()
//         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
//         await $('button[data-action="automation-more"]').click()
//         await $('button[data-action="automation-more-delete"]').click()
//         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
//         await $('button[data-action="confirm-downgrade"]').click()
//         await delay(5000)
//         await expect($('span=clone')).not.toBeDisplayed()
//         await delay(2000)
//     })
//     it('Second', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await delay(3000)
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await $('table tbody tr:first-of-type td.mat-column-title span').click()
//         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
//         await $('button[data-action="automation-more"]').click()
//         await $('button[data-action="automation-more-clone"]').click()
//         await $('input[name="automationTitle"]').waitForDisplayed({ timeout: 5000 })
//         await $('input[name="automationTitle"]').setValue('clone')
//         await $('button[data-action="automation-create"]').click()
//         await delay(5000)
//         await $('div[data-name="sidebar-item-automations"]').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(2000)
//         await expect($('span=clone')).toBeDisplayed()
//         await delay(4000)
//         await $('span=clone').click()
//         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
//         await $('button[data-action="automation-more"]').click()
//         await $('button[data-action="automation-more-delete"]').click()
//         await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
//         await $('button[data-action="confirm-downgrade"]').click()
//         await delay(5000)
//         await expect($('span=clone')).not.toBeDisplayed()
//         await delay(2000)
//     })
// })
// describe('Share', () => {
//     it('First', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await delay(3000)
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await $('table tbody tr:first-of-type td.mat-column-title span').moveTo()
//         await $('table tbody tr:first-of-type i.i-menu-more').click()
//         await $('table tbody tr:first-of-type button[data-action="automation-drop-share"]').click()
//         await $('app-team-material-share').waitForDisplayed({ timeout: 5000 })
//         await $('mat-select[name="team"]').click()
//         await $(`mat-option[data-name="pipeline-community-select-item-${testCommunityName}"]`).click()
//         await $('button[data-action="pipeline-share-unshare"]').click()
//         await delay(5000)
//         const confirm = await $('app-confirm').isDisplayed()
//         if(confirm) {
//             await $('button[data-action="confirm-downgrade"]').click()
//         }
//         await $('app-team-material-share').waitForDisplayed({ reverse: true })
//         await expect($('span=' + testCommunityName)).toBeDisplayed()
//         await delay(2000)
//         await $('table tbody tr:first-of-type td.mat-column-title span').moveTo()
//         await $('table tbody tr:first-of-type i.i-menu-more').click()
//         await $('table tbody tr:first-of-type td.mat-column-actions button[data-action="automation-drop-stop-share"]').waitForClickable({ timeout: 3000 })
//         await $('table tbody tr:first-of-type button[data-action="automation-drop-stop-share"]').click()
//         await $('app-team-material-share').waitForDisplayed({ timeout: 5000 })
//         await $('mat-select[name="team"]').click()
//         await $(`mat-option[data-name="pipeline-community-select-item-${testCommunityName}"]`).click()
//         await $('button[data-action="team-material-unshare"]').click()
//         await delay(5000)
//         const confirm1 = await $('app-confirm').isDisplayed()
//         if(confirm1) {
//             await $('button[data-action="confirm-downgrade"]').click()
//         }
//         await $('app-team-material-share').waitForDisplayed({ reverse: true })
//         await delay(5000)
//     })
//     it('Second', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await delay(3000)
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await $('table tbody tr:first-of-type td.mat-column-title span').click()
//         await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
//         await $('button[data-action="automation-more"]').click()
//         await $('button[data-action="automation-more-share"]').click()
//         await $('app-team-material-share').waitForDisplayed({ timeout: 5000 })
//         await $('mat-select[name="team"]').click()
//         await $(`mat-option[data-name="pipeline-community-select-item-${testCommunityName}"]`).click()
//         await $('button[data-action="pipeline-share-unshare"]').click()
//         await delay(5000)
//         const confirm = await $('app-confirm').isDisplayed()
//         if(confirm) {
//             await $('button[data-action="confirm-downgrade"]').click()
//         }
//         await $('app-team-material-share').waitForDisplayed({ reverse: true })
//         await $('div[data-name="sidebar-item-automations"]').click()
//         await delay(3000)
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await expect($('span=' + testCommunityName)).toBeDisplayed()
//         await $('table tbody tr:first-of-type td.mat-column-title span').moveTo()
//         await $('table tbody tr:first-of-type i.i-menu-more').click()
//         await $('table tbody tr:first-of-type button[data-action="automation-drop-stop-share"]').click()
//         await $('app-team-material-share').waitForDisplayed({ timeout: 5000 })
//         await $('mat-select[name="team"]').click()
//         await $(`mat-option[data-name="pipeline-community-select-item-${testCommunityName}"]`).click()
//         await $('button[data-action="team-material-unshare"]').click()
//         await delay(5000)
//         const confirm1 = await $('app-confirm').isDisplayed()
//         if(confirm1) {
//             await $('button[data-action="confirm-downgrade"]').click()
//         }
//         await $('app-team-material-share').waitForDisplayed({ reverse: true })
//         await delay(5000)
//     })
// })
// describe.skip('Folder', () => {
//     it('Create', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').waitForClickable({ timeout: 3000 })
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await $('button[data-action="create-new-folder-automation"]').click()
//         await $('app-folder').waitForDisplayed({ timeout: 2000 })
//         await $('input[name="name"]').setValue('My Folder')
//         await delay(2000)
//         await $('button[data-action="material-folder-create-save"]').click()
//         await $('app-folder').waitForDisplayed({ reverse: true })
//         await delay(3000)
//         await expect($('span=My Folder')).toBeDisplayed()
//     })
//     it('Edit', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('div.actions-header div[data-name="material-action-item-Edit"]').waitForClickable({ timeout: 3000 })
//         await $('div.actions-header div[data-name="material-action-item-Edit"]').click()
//         await $('app-folder').waitForDisplayed({ timeout: 2000 })
//         await $('input[name="name"]').setValue('My Folder Update')
//         await $('button[data-action="material-folder-create-save"]').click()
//         await $('app-folder').waitForDisplayed({ reverse: true })
//         await delay(3000)
//         await expect($('table tbody tr:first-of-type td.mat-column-title span')).toHaveText('My Folder Update')
//     })
//     it('Delete', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('div.actions-header div[data-name="material-action-item-Delete"]').waitForClickable({ timeout: 3000 })
//         await $('div.actions-header div[data-name="material-action-item-Delete"]').click()
//         await $('app-delete-folder').waitForDisplayed({ timeout: 2000 })
//         await $('button[data-action="automations-folder-delete-all"]').click()
//         await $('app-delete-folder').waitForDisplayed({ reverse: true })
//         await expect($('span=My Folder Update')).not.toExist()
//     })
//     it('Delete & Move', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         // Create
//         await $('button[data-action="create-new-folder-automation"]').click()
//         await $('app-folder').waitForDisplayed({ timeout: 2000 })
//         await $('input[name="name"]').setValue('My Folder')
//         await $('button[data-action="material-folder-create-save"]').click()
//         await $('app-folder').waitForDisplayed({ reverse: true })
//         await expect($('span=My Folder')).toBeDisplayed()
//         // Delete
//         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('div.actions-header div[data-name="material-action-item-Delete"]').waitForClickable({ timeout: 3000 })
//         await $('div.actions-header div[data-name="material-action-item-Delete"]').click()
//         await $('app-delete-folder').waitForDisplayed({ timeout: 2000 })
//         await $('div[data-name="folder-delete-move-select"]').click()
//         await $('button[data-action="automations-folder-delete-move"]').click()
//         await $('app-delete-folder').waitForDisplayed({ reverse: true })
//         await expect($('span=My Folder')).not.toExist()
//     })
// })
// describe('Automation List', () => {
//     it('Move To', async () => {
//         // Create Folder
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await $('button[data-action="create-new-folder-automation"] > span').waitForClickable({ timeout: 5000 })
//         await $('button[data-action="create-new-folder-automation"] > span').click()
//         await $('app-folder').waitForDisplayed({ timeout: 2000 })
//         await $('input[name="name"]').setValue('My Folder')
//         await $('button[data-action="material-folder-create-save"]').click()
//         await $('app-folder').waitForDisplayed({ reverse: true })
//         await delay(2000)
//         // MoveTo
//         const topItemValue = await $('table tbody tr:nth-of-type(3) td.mat-column-title span').getText()
//         await $('table tbody tr:nth-of-type(3) td.mat-column-title span').moveTo()
//         browser.pause(2000)
//         await $('table tbody tr:nth-of-type(3) td.mat-column-actions i.i-menu-more').click()
//         await $('table tbody tr:nth-of-type(3) td.mat-column-actions button[data-action="automation-drop-moveTo"]').waitForClickable({ timeout: 3000 })
//         await $('table tbody tr:nth-of-type(3) td.mat-column-actions button[data-action="automation-drop-moveTo"]').click()
//         await $('app-move-folder').waitForDisplayed({ timeout: 3000 })
//         await $('app-move-folder a.material-main-info span').waitForClickable({ timeout: 5000 })
//         await $('app-move-folder a.material-main-info span').click()
//         await $('button[data-action="material-move-confirm"]').waitForClickable({ timeout: 3000 })
//         await $('button[data-action="material-move-confirm"]').click()
//         await $('app-move-folder').waitForDisplayed({ reverse: true })
//         await $('table tbody tr:first-of-type td.mat-column-title span').click()
//         await delay(3000)
//         await expect($('table tbody tr:first-of-type td.mat-column-title span')).toHaveText(topItemValue)
//         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('div[data-name="material-action-item-Move To"]').click()
//         await $('app-move-folder').waitForDisplayed({ timeout: 3000 })
//         await $('button[data-action="material-move-confirm"]').waitForClickable({ timeout: 3000 })
//         await $('button[data-action="material-move-confirm"]').click()
//         await $('app-move-folder').waitForDisplayed({ reverse: true })
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('div.actions-header div[data-name="material-action-item-Delete"]').waitForClickable({ timeout: 3000 })
//         await $('div.actions-header div[data-name="material-action-item-Delete"]').click()
//         await $('app-delete-folder').waitForDisplayed({ timeout: 2000 })
//         await $('button[data-action="automations-folder-delete-all"]').click()
//         await $('app-delete-folder').waitForDisplayed({ reverse: true })
//         await delay(3000)
//     })
//     describe('Delete', () => {
//         it('First', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('table tbody tr:first-of-type td.mat-column-title span').moveTo()
//             browser.pause(2000)
//             await $('table tbody tr:first-of-type td.mat-column-actions i.i-menu-more').click()
//             await $('table tbody tr:first-of-type td.mat-column-actions button[data-action="automation-drop-delete"]').click()
//             await $('app-confirm').waitForDisplayed({ timeout: 2000 })
//             await expect($('app-confirm button[data-action="confirm-downgrade"]')).toBeDisplayed()
//             await $('button=Cancel').click()
//             await $('app-confirm').waitForDisplayed({ reverse: true })
//         })
//         it('Second', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('table tbody tr:first-of-type td.mat-column-title span').click()
//             await $('button[data-action="automation-more"]').waitForClickable({ timeout: 7000 })
//             await $('button[data-action="automation-more"]').click()
//             await $('button[data-action="automation-more-delete"]').click()
//             await $('app-confirm').waitForDisplayed({ timeout: 2000 })
//             await expect($('app-confirm button[data-action="confirm-downgrade"]')).toBeDisplayed()
//             await $('app-confirm button[type="button"]').click()
//             await $('app-confirm').waitForDisplayed({ reverse: true })
//             await delay(5000)
//             await $('div[data-name="sidebar-item-automations"]').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(2000)
//         })
//     })
//     it('Edit', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         const topItemValue = await $('table tbody tr:first-of-type td.mat-column-title span').getText()
//         await $('table tbody tr:first-of-type td.mat-column-title span').moveTo()
//         browser.pause(2000)
//         await $('table tbody tr:first-of-type td:last-of-type i.i-edit').click()
//         await $('div.automation-name-wrapper i.i-edit').waitForClickable({ timeout: 5000 })
//         await $('div.automation-name-wrapper i.i-edit').click()
//         await $('input[name="automationTitle"]').setValue('updated automation')
//         await $('button[data-action="automation-name-save"]').click()
//         await delay(5000)
//         await $('div[data-name="sidebar-item-automations"]').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//         await expect($('span=updated automation')).toBeDisplayed()
//         await delay(2000)
//         await $('span=edited automation').click()
//         await $('div.automation-name-wrapper i.i-edit').waitForClickable({ timeout: 5000 })
//         await $('div.automation-name-wrapper i.i-edit').click()
//         await $('input[name="automationTitle"]').setValue(topItemValue)
//         await $('button[data-action="automation-name-save"]').click()
//         await delay(5000)
//         await $('div[data-name="sidebar-item-automations"]').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await delay(3000)
//     })
//     describe('Assign', () => { 
//         it('play', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             const topItemValue = await $('table tbody tr:first-of-type td.mat-column-title span').getText()
//             await $('table tbody tr:first-of-type td.mat-column-title span').moveTo()
//             browser.pause(2000)
//             await $('table tbody tr:first-of-type i.i-next').click()
//             await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
//             await $('app-select-contact mat-form-field').click()
//             await $('div.mat-select-search-inner input.mat-select-search-input').setValue('j')
//             await $('div=' + testContactName).click()
//             await $('button[data-action="automation-assign-confirm"]').click()
//             await $('app-automation-assign').waitForDisplayed({ reverse: true })
//             await $('div[data-name="sidebar-item-contacts"]').click()
//             await $('span=' + testContactName).waitForClickable({ timeout: 3000 })
//             await $('span=' + testContactName).click()
//             await delay(5000)
//             await $('span[data-name="deal-tab-item-TO-DO"]').click()
//             await $('div.reload i.i-refresh').click()
//             await delay(5000)
//             const element = 'div=' + topItemValue
//             await expect($(element)).toBeDisplayed()
//             await delay(2000)
//             await $('i.i-automation-cancel').click()
//             await $('button=Unassign').click()
//             await delay(5000)
//         })
//         it('assign', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             const topItemValue = await $('table tbody tr:first-of-type td.mat-column-title span').getText()
//             await $('table tbody tr:first-of-type td.mat-column-title span').click()
//             await $('button[data-action="automation-assign"]').waitForClickable({ timeout: 5000 })
//             await $('button[data-action="automation-assign"]').click()
//             await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
//             await $('app-select-contact mat-form-field').click()
//             await $('div.mat-select-search-inner input.mat-select-search-input').setValue('j')
//             await $('div=' + testContactName).click()
//             await $('button[data-action="automation-assign-confirm"]').click()
//             await $('app-automation-assign').waitForDisplayed({ reverse: true })
//             await $('div[data-name="sidebar-item-contacts"]').click()
//             await $('span=' + testContactName).waitForClickable({ timeout: 3000 })
//             await $('span=' + testContactName).click()
//             await delay(5000)
//             await $('span[data-name="deal-tab-item-TO-DO"]').click()
//             await $('div.reload i.i-refresh').click()
//             await delay(5000)
//             const element = 'div=' + topItemValue
//             await expect($(element)).toBeDisplayed()
//             await delay(2000)
//             await $('i.i-automation-cancel').click()
//             await $('button=Unassign').click()
//             await delay(5000)
//         })
//         it('Create and play', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             const topItemValue = await $('table tbody tr:first-of-type td.mat-column-title span').getText()
//             await $('table tbody tr:first-of-type td.mat-column-title span').moveTo()
//             browser.pause(2000)
//             await $('table tbody tr:first-of-type i.i-next').click()
//             await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
//             await $('div[data-name="new-contact-to-assign-automation"]').click()
//             await $('app-contact-create').waitForDisplayed({ timeout: 3000 })
//             await $('input[data-name="contact-create-firstname"]').setValue('Automation')
//             await $('input[data-name="contact-create-lastname"]').setValue('Tester')
//             await $('button[data-action="create-contact-add-btn"]').click()
//             await $('app-contact-create').waitForDisplayed({ reverse: true })
//             await $('app-select-contact mat-form-field').click()
//             await $('div.mat-select-search-inner input.mat-select-search-input').setValue('t')
//             await $('div=Automation Tester').click()
//             await $('button[data-action="automation-assign-confirm"]').click()
//             await $('app-automation-assign').waitForDisplayed({ reverse: true })
//             await delay(2000)
//             await $('div[data-name="sidebar-item-contacts"] > a').click()
//             await delay(5000)
//             await $('span=Automation Tester').click()
//             await delay(5000)
//             await $('span[data-name="deal-tab-item-TO-DO"]').waitForClickable({ timeout: 7000 })
//             await $('span[data-name="deal-tab-item-TO-DO"]').click()
//             await $('div.reload i.i-refresh').click()
//             await delay(5000)
//             const element = 'div=' + topItemValue
//             await expect($(element)).toBeDisplayed()
//             await delay(2000)
//             await $('i.i-automation-cancel').click()
//             await $('button=Unassign').click()
//             await delay(5000)
//             await $('div[data-name="contact-dropdown-toggle"]').scrollIntoView()
//             await $('div[data-name="contact-dropdown-toggle"]').waitForClickable({ timeout: 5000 })
//             await $('div[data-name="contact-dropdown-toggle"]').click()
//             await $('button[data-action="contact-action-delete"]').click()
//             await $('button[data-action="confirm-downgrade"]').click()
//             await delay(5000)
//         })
//         it('Create and assign', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             const topItemValue = await $('table tbody tr:first-of-type td.mat-column-title span').getText()
//             await $('table tbody tr:first-of-type td.mat-column-title span').click()
//             await $('button[data-action="automation-assign"]').waitForClickable({ timeout: 5000 })
//             await $('button[data-action="automation-assign"]').click()
//             await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
//             await $('div[data-name="new-contact-to-assign-automation"]').click()
//             await $('app-contact-create').waitForDisplayed({ timeout: 3000 })
//             await $('input[data-name="contact-create-firstname"]').setValue('Automation')
//             await $('input[data-name="contact-create-lastname"]').setValue('Tester')
//             await $('button[data-action="create-contact-add-btn"]').click()
//             await $('app-contact-create').waitForDisplayed({ reverse: true })
//             await $('app-select-contact mat-form-field').click()
//             await $('div.mat-select-search-inner input.mat-select-search-input').setValue('t')
//             await $('div=Automation Tester').click()
//             await $('button[data-action="automation-assign-confirm"]').click()
//             await $('app-automation-assign').waitForDisplayed({ reverse: true })
//             await $('div[data-name="sidebar-item-contacts"]').click()
//             await delay(5000)
//             await $('span=Automation Tester').click()
//             await delay(15000)
//             await $('span[data-name="deal-tab-item-TO-DO"]').waitForClickable({ timeout: 7000 })
//             await $('span[data-name="deal-tab-item-TO-DO"]').click()
//             await $('div.reload i.i-refresh').click()
//             await delay(5000)
//             const element = 'div=' + topItemValue
//             await expect($(element)).toBeDisplayed()
//             await delay(2000)
//             await $('i.i-automation-cancel').click()
//             await $('button=Unassign').click()
//             await delay(5000)
//             await $('div[data-name="contact-dropdown-toggle"]').scrollIntoView()
//             await $('div[data-name="contact-dropdown-toggle"]').waitForClickable({ timeout: 5000 })
//             await $('div[data-name="contact-dropdown-toggle"]').click()
//             await $('button[data-action="contact-action-delete"]').click()
//             await $('button[data-action="confirm-downgrade"]').click()
//             await delay(5000)
//         })
//     })
// })
// describe('Assigned Contacts', () => {
//     describe('Assign', () => {
//         it('Assign', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(5000)
//             await $('span=' + testAutomationName).click()
//             await $('button[data-action="automation-assign"]').waitForClickable({ timeout: 5000 })
//             await $('button[data-action="automation-assign"]').click()
//             await $('app-automation-assign').waitForDisplayed({ timeout: 2000 })
//             await $('app-select-contact mat-form-field').click()
//             await $('mat-option.contains-mat-select-search div.mat-typography input.mat-select-search-input').setValue('j')
//             await $('div=' + testContactName).waitForClickable({ timeout: 5000 })
//             await $('div=' + testContactName).click()
//             await $('button[data-action="automation-assign-confirm"]').click()
//             await $('app-automation-assign').waitForDisplayed({ reverse: true })
//             await delay(5000)
//         })
//     })
//     describe('New Email', () => {
//         it('Send', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(5000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-New Email"]').click()
//             await $('app-send-email').waitForDisplayed({ timeout: 3000 })
//             await $('input[data-name="deal-send-email-subject"]').setValue('Soccer')
//             await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div:last-of-type').setValue('Lionel Messi')
//             await $('i.i-material').click()
//             await $('app-material-browser').waitForDisplayed({ timeout: 5000 })
//             await $('table tbody tr:last-of-type td.mat-column-material_name div.thumbnail').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:last-of-type td.mat-column-material_name div.thumbnail').click()
//             await $('button[data-action="automation-material-insert-btn"]').click()
//             await $('app-material-browser').waitForDisplayed({ reverse: true })
//             await $('button[data-action="deal-email-send"]').click()
//             await $('app-send-email').waitForDisplayed({ reverse: true })
//             await $('table tbody tr:first-of-type td.mat-column-contact_name div.contact-avatar').click()
//             await delay(5000)
//             await $('span[data-name="deal-tab-item-Emails"]').click()
//             await expect($('div.history-detail:first-of-type div.subject')).toHaveText('Soccer')
//         })
//         it('Schedule', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-New Email"]').click()
//             await $('app-send-email').waitForDisplayed({ timeout: 3000 })
//             await $('input[data-name="deal-send-email-subject"]').setValue('Soccer')
//             await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div:last-of-type').setValue('Lionel Messi')
//             await $('i.i-material').click()
//             await $('app-material-browser').waitForDisplayed({ timeout: 5000 })
//             await $('table tbody tr:last-of-type td.mat-column-material_name div.thumbnail').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:last-of-type td.mat-column-material_name div.thumbnail').click()
//             await $('button[data-action="automation-material-insert-btn"]').click()
//             await $('app-material-browser').waitForDisplayed({ reverse: true })
//             await $('i.i-schedule-send').click()
//             await $('table tr[data-name="schedule-time-select-2"]').click()
//             await $('button[data-action="contact-item-schedule"]').click()
//             await $('app-send-email').waitForDisplayed({ reverse: true })
//             await $('app-custom-toast').waitForDisplayed({ timeout: 5000 })
//             await expect($('div=Email Queue')).toBeDisplayed()
//         }) 
//     })
//     describe.skip('New Text', () => {
//         it('Send', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-New Text"]').click()
//             await $('app-send-text').waitForDisplayed({ timeout: 3000 })
//             await $('textarea').setValue('Kevin')
//             await $('button[data-action="template-contact-text-send"]').click()
//             await $('app-send-text').waitForDisplayed({ reverse: true })
//             await $('table tbody tr:last-of-type td.mat-column-contact_name div.contact-avatar').click()
//             await delay(5000)
//             await $('span[data-name="deal-tab-item-Texts"]').click()
//             await expect($('div.history-detail:first-of-type span.text-content')).toHaveText('Kevin')
//         })
//         it('Schedule', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-New Text"]').click()
//             await $('app-send-text').waitForDisplayed({ timeout: 3000 })
//             await $('textarea').setValue('Kevin')
//             await $('i.i-schedule-send').click()
//             await $('table tr[data-name="schedule-time-select-2"]').click()
//             await $('button=Schedule').click()
//             await $('app-send-text').waitForDisplayed({ reverse: true })
//             await $('app-custom-toast').waitForDisplayed({ timeout: 5000 })
//             await expect($('div=Text Queue')).toBeDisplayed()
//         })
//     })
//     describe('New Note', () => {
//         it('Send', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-More"]').click()
//             await $('div[data-name="material-action-item-More-New Note"]').click()
//             await $('app-note-create').waitForDisplayed({ timeout: 3000 })
//             await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div').setValue('I added a new automation note')
//             await $('button[data-action="deal-note-create"]').click()
//             await $('app-note-create').waitForDisplayed({ reverse: true })
//             await $('table tbody tr:last-of-type td.mat-column-contact_name div.contact-avatar').click()
//             await delay(5000)
//             await $('span[data-name="deal-tab-item-Notes"]').click()
//             await expect($('div.history-detail:first-of-type app-accordion div.note-content > div')).toHaveText('I added a new automation note')
//         })
//     })
//     describe('Other', () => {
//         it('New Automation', async () => {
//             // Assign to robot-contact
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-More"]').click()
//             await $('div[data-name="material-action-item-More-Add automation"]').click()
//             await $('app-contact-assign-automation').waitForDisplayed({ timeout: 3000 })
//             await $('app-contact-assign-automation mat-form-field div.mat-select-trigger').waitForClickable({ timeout: 3000 })
//             await $('app-contact-assign-automation mat-form-field div.mat-select-trigger').click()
//             await $('span=robot-contact').waitForClickable({ timeout: 5000 })
//             await $('span=robot-contact').click()
//             await $('button[data-action="contact-assign-automation-add"]').click()
//             await $('button[data-action="confirm-bulk-automation-ok"]').click()
//             await $('app-contact-assign-automation').waitForDisplayed({ reverse: true })
//             await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//             await delay(5000)
//             await $('span[data-name="deal-tab-item-TO-DO"]').click()
//             await expect($('div=robot-contact')).toBeDisplayed()
//             await delay(3000)
//             // Reassign to Fixed Test Automation
//             await $('div[data-name="sidebar-item-automations"]').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=robot-contact').waitForClickable({ timeout: 5000 })
//             await $('span=robot-contact').click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-More"]').click()
//             await $('div[data-name="material-action-item-More-Add automation"]').click()
//             await $('app-contact-assign-automation').waitForDisplayed({ timeout: 3000 })
//             await $('app-contact-assign-automation mat-form-field div.mat-select-trigger').waitForClickable({ timeout: 3000 })
//             await $('app-contact-assign-automation mat-form-field div.mat-select-trigger').click()
//             await $('span=' + testAutomationName).click()
//             await $('button[data-action="contact-assign-automation-add"]').click()
//             await $('button[data-action="confirm-bulk-automation-ok"]').click()
//             await $('app-contact-assign-automation').waitForDisplayed({ reverse: true })
//             await delay(5000)
//         })
//         it('New Deal', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-More"]').click()
//             await $('div[data-name="material-action-item-More-New Deal"]').click()
//             await $('app-deal-create').waitForDisplayed({ timeout: 2000 })
//             await $('input[data-name="deal-title"]').setValue('Kevin Deal')
//             await $('select[data-name="select-stage"]').click()
//             await $('option[data-name="select-stage-item-0"]').click()
//             await $('button[data-action="deal-create-confirm"]').click()
//             await $('app-deal-create').waitForDisplayed({ reverse: true })
//             await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//             await delay(5000)
//             await $('span[data-name="deal-tab-item-Deals"]').click()
//             await delay(3000)
//             await expect($('div.history-detail:first-of-type div.main-history-item a')).toHaveText('Kevin Deal')
//         })
//         it('New Meeting', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-More"]').click()
//             await $('div[data-name="material-action-item-More-New Meeting"]').click()
//             await $('app-calendar-dialog').waitForDisplayed({ timeout: 3000 })
//             await $('input[data-name="deal-meeting-title"]').setValue('Good Meeting')
//             await $('select[data-name="deal-time-select"]').click()
//             await $('option[data-name="deal-time-select-item-2"]').click()
//             await $('span[id="create-task-select-timezone"]').click()
//             await $('span[id="create-task-select-timezone-item-1"]').click()
//             await $('input[data-name="deal-location"]').setValue('Paris')
//             await $('quill-editor[data-name="deal-action-description"] div.ql-editor > div').setValue('Congratulations!')
//             await $('button[data-action="deal-action-create"]').click()
//             await $('app-calendar-dialog').waitForDisplayed({ reverse: true })
//             await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//             await delay(5000)
//             await $('span[data-name="deal-tab-item-Meetings"]').click()
//             await expect($('div.history-detail:first-of-type div.summary a.appt-title')).toHaveText('Good Meeting')
//         })
//         it('Download', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-More"]').click()
//             await $('div[data-name="material-action-item-More-Download"]').click()
//             await $('app-contact-download-progress-bar').waitForDisplayed({ timeout: 3000 })
//             await expect($('div.dialog-container div.c-black')).toHaveText('Download Result(downloading)')
//         })
//     })
//     describe.skip('Share', () => {
//         it('Transfer', async () => {
            
//         })
//     })
//     describe('Select', () => {
//         it('Select All', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-More"]').click()
//             await $('div[data-name="material-action-item-More-Select all"]').click()
//             await expect($('table tbody tr:first-of-type td.mat-column-select input[type="checkbox"]')).toBeChecked()
//             await expect($('table tbody tr:last-of-type td.mat-column-select input[type="checkbox"]')).toBeChecked()
//         })
//         it('DeSelect', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-More"]').click()
//             await $('div[data-name="material-action-item-More-Deselect"]').click()
//             await expect($('table tbody tr:first-of-type td.mat-column-select input[type="checkbox"]')).not.toBeChecked()
//             await expect($('table tbody tr:last-of-type td.mat-column-select input[type="checkbox"]')).not.toBeChecked()
//         })
//     })
//     describe('Task', () => {
//         describe('General', () => {
//             it('Create', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-general"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//             it('All Day', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-general"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('label[data-name="all_day_tc"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//             it('Recurring', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-general"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('label[data-name="repeat_tc"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//         })
//         describe('Call', () => {
//             it('Create', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-call"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//             it('All Day', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-call"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('label[data-name="all_day_tc"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//             it('Recurring', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-call"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('label[data-name="repeat_tc"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//         })
//         describe('Meeting', () => {
//             it('Create', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-meeting"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//             it('All Day', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-meeting"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('label[data-name="all_day_tc"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//             it('Recurring', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-meeting"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('label[data-name="repeat_tc"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await delay(2000)
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//         })
//         describe('Email', () => {
//             it('Create', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-email"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//             it('Recurring', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-email"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('label[data-name="repeat_tc"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//         })
//         describe('Text', () => {
//             it('Create', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-text"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//             it('Recurring', async () => {
//                 await $('div[data-name="sidebar-item-automations"] > a').click()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//                 await $('span[data-name="profile-tab-item-My Automations List"]').click()
//                 await delay(3000)
//                 await $('span=' + testAutomationName).click()
//                 await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//                 await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//                 await $('div[data-name="material-action-item-New Task"]').click()
//                 await $('app-task-create').waitForDisplayed({ timeout: 3000 })
//                 await $('div[data-name="task-type-text"]').click()
//                 await $('input[name="content"]').setValue('Auto Task')
//                 await $('mat-select[data-name="task-time-select"]').click()
//                 await $('mat-option[data-name="task-date-time-2"]').click()
//                 await $('span[id="create-task-select-timezone"]').click()
//                 await $('span[id="create-task-select-timezone-item-4"]').click()
//                 await $('label[data-name="repeat_tc"]').click()
//                 await $('button[data-action="new-task-create"]').click()
//                 await $('app-task-create').waitForDisplayed({ reverse: true })
//                 await $('table tbody tr:last-of-type td:nth-of-type(2) div.contact-avatar').click()
//                 await delay(5000)
//                 await $('span[data-name="deal-tab-item-Activity"]').click()
//                 await expect($('div.history-detail:first-of-type div.main-history-item div.content')).toHaveText('Auto Task')
//             })
//         })
//     })
//     describe('Delete', () => {
//         it('Delete', async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//             await $('span=' + testAutomationName).click()
//             await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//             await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//             await $('div[data-name="material-action-item-More"]').click()
//             await $('div[data-name="material-action-item-More-Delete"]').click()
//             await $('app-confirm').waitForDisplayed({ timeout: 3000 })
//             await expect($('button[data-action="confirm-downgrade"]')).toBeDisplayed()
//             await $('app-confirm button[type="button"]').click()
//             await $('app-confirm').waitForDisplayed({ reverse: true })
//         })
//     })
// })
// describe('Pagination', () => {
//     describe('List', () => {
//         beforeEach(async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(2000)
//         })
//         it('8 Rows', async () => {
//             const paginationExist = await $('div[data-name="automation-list-pagination"]').isDisplayed()
//             if(paginationExist) {
//                 await $('div[data-name="automation-list-pagination"]').click()
//                 await $('div[data-name="automation-list-pagination-8"]').click()
//                 await expect($('div[data-name="automation-list-pagination"] span')).toHaveText('Show 8 rows per page')
//             }
//         })
//         it('10 Rows', async () => {
//             const paginationExist = await $('div[data-name="automation-list-pagination"]').isDisplayed()
//             if(paginationExist) {
//                 await $('div[data-name="automation-list-pagination"]').click()
//                 await $('div[data-name="automation-list-pagination-10"]').click()
//                 await expect($('div[data-name="automation-list-pagination"] span')).toHaveText('Show 10 rows per page')
//             }
//         })
//         it('25 Rows', async () => {
//             const paginationExist = await $('div[data-name="automation-list-pagination"]').isDisplayed()
//             if(paginationExist) {
//                 await $('div[data-name="automation-list-pagination"]').click()
//                 await $('div[data-name="automation-list-pagination-25"]').click()
//                 await expect($('div[data-name="automation-list-pagination"] span')).toHaveText('Show 25 rows per page')
//             }
//         })
//         it('50 Rows', async () => {
//             const paginationExist = await $('div[data-name="automation-list-pagination"]').isDisplayed()
//             if(paginationExist) {
//                 await $('div[data-name="automation-list-pagination"]').click()
//                 await $('div[data-name="automation-list-pagination-50"]').click()
//                 await expect($('div[data-name="automation-list-pagination"] span')).toHaveText('Show 50 rows per page')
//             }
//         })
//     })
//     describe('Library', () => {
//         beforeEach(async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-Automations Library"]').click()
//             await delay(2000)
//         })
//         it('8 Rows', async () => {
//             const paginationExist = await $('div[data-name="automation-library-pagination"]').isDisplayed()
//             if(paginationExist) {
//                 await $('div[data-name="automation-library-pagination"]').click()
//                 await $('div[data-name="automation-library-pagination-8"]').click()
//                 await expect($('div[data-name="automation-library-pagination"] span')).toHaveText('Show 8 rows per page')
//             }
//         })
//         it('10 Rows', async () => {
//             const paginationExist = await $('div[data-name="automation-library-pagination"]').isDisplayed()
//             if(paginationExist) {
//                 await $('div[data-name="automation-library-pagination"]').click()
//                 await $('div[data-name="automation-library-pagination-10"]').click()
//                 await expect($('div[data-name="automation-library-pagination"] span')).toHaveText('Show 10 rows per page')
//             }
//         })
//         it('25 Rows', async () => {
//             const paginationExist = await $('div[data-name="automation-library-pagination"]').isDisplayed()
//             if(paginationExist) {
//                 await $('div[data-name="automation-library-pagination"]').click()
//                 await $('div[data-name="automation-library-pagination-25"]').click()
//                 await expect($('div[data-name="automation-library-pagination"] span')).toHaveText('Show 25 rows per page')
//             }
//         })
//         it('50 Rows', async () => {
//             const paginationExist = await $('div[data-name="automation-library-pagination"]').isDisplayed()
//             if(paginationExist) {
//                 await $('div[data-name="automation-library-pagination"]').click()
//                 await $('div[data-name="automation-library-pagination-50"]').click()
//                 await expect($('div[data-name="automation-library-pagination"] span')).toHaveText('Show 50 rows per page')
//             }
//         })
//     })
// })
// describe('Sort Automation', () => {
//     describe('In List Sort by', () => {
//         beforeEach(async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//             await $('span[data-name="profile-tab-item-My Automations List"]').click()
//             await delay(3000)
//         })
//         it('Title', async () => {
//             const title = await $('table tbody tr:first-of-type td.mat-column-title a span').getText()
//             await $('th.mat-column-title div.head-sort').waitForClickable({ timeout: 3000 })
//             await $('th.mat-column-title div.head-sort').click()
//             await $('th.mat-column-title div.head-sort').click()
//             await expect($('table tbody tr:first-of-type td.mat-column-title a span')).not.toHaveText(title)
//         })
//         it('Type', async () => {
//             const title = await $('table tbody tr:first-of-type td.mat-column-title a span').getText()
//             await $('th.mat-column-type div.head-sort').click()
//             await expect($('table tbody tr:first-of-type td.mat-column-title a span')).not.toHaveText(title)
//         })
//         it('Label', async () => {
//             const title = await $('table tbody tr:first-of-type td.mat-column-title a span').getText()
//             await $('th.mat-column-label div.head-sort').click()
//             await expect($('table tbody tr:first-of-type td.mat-column-title a span')).not.toHaveText(title)
//         })
//         it('Added', async () => {
//             const title = await $('table tbody tr:first-of-type td.mat-column-title a span').getText()
//             await $('th.mat-column-created div.head-sort').click()
//             await expect($('table tbody tr:first-of-type td.mat-column-title a span')).not.toHaveText(title)
//         })
//     })
//     describe('In Library Sort by', () => {
//         beforeEach(async () => {
//             await $('div[data-name="sidebar-item-automations"] > a').click()
//             await $('span[data-name="profile-tab-item-Automations Library"]').click()
//             await delay(3000)
//         })
//         it('Title', async () => {
//             const title = await $('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title a span').getText()
//             await $('app-automations-library th.mat-column-title div.head-sort').waitForClickable({ timeout: 3000 })
//             await $('app-automations-library th.mat-column-title div.head-sort').click()
//             await $('app-automations-library th.mat-column-title div.head-sort').click()
//             await expect($('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title span')).not.toHaveText(title)
//         })
//         it('Type', async () => {
//             const title = await $('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title a span').getText()
//             await $('app-automations-library table thead th.mat-column-type div.head-sort').click()
//             await expect($('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title span')).not.toHaveText(title)
//         })
//         it('Label', async () => {
//             const title = await $('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title a span').getText()
//             await $('app-automations-library table thead th.mat-column-label div.head-sort').click()
//             await expect($('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title span')).not.toHaveText(title)
//         })
//         it('Added', async () => {
//             const title = await $('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title a span').getText()
//             await $('app-automations-library table thead th.mat-column-created div.head-sort').click()
//             await expect($('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title span')).not.toHaveText(title)
//         })
//         it('Owner', async () => {
//             const title = await $('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title a span').getText()
//             await $('app-automations-library table thead th.mat-column-owner div.head-sort').click()
//             await expect($('app-automations-library table tbody tr:nth-last-of-type(2) td.mat-column-title span')).not.toHaveText(title)
//         })
//         it('Download', async () => {
//             const title = await $('app-automations-library table tbody tr:nth-of-type(3) td.mat-column-title a span').getText()
//             await $('app-automations-library table thead th.mat-column-downloads div.head-sort span').click()
//             await expect($('app-automations-library table tbody tr:nth-of-type(3) td.mat-column-title span')).not.toHaveText(title)
//         })
//     })
// })
// describe('Assign and Stop Automation', () => {
//     it('Assign', async () => {
//         await $('div[data-name="sidebar-item-contacts"] > a').click()
//         await $('span=' + testContactName).waitForClickable({ timeout: 9000 })
//         await $('span=' + testContactName).click()
//         await delay(5000)
//         await $('mat-form-field[data-name="contact-input-automation-select"]').click()
//         await $(`mat-option[data-name="contact-input-automation-select-${testAutomationName}"]`).scrollIntoView()
//         await browser.pause(2000)
//         await $(`mat-option[data-name="contact-input-automation-select-${testAutomationName}"] div.automation-name`).click()
//         await $('div.automation-action i.i-automation-start').waitForClickable({ timeout: 3000 })
//         await $('div.automation-action i.i-automation-start').click()
//         await delay(5000)
//         const confirmDialog = await $('app-confirm').isDisplayed()
//         if(confirmDialog) await $('app-confirm button[data-action="confirm-downgrade"]').click()
//         await $('span[data-name="deal-tab-item-TO-DO"]').waitForClickable({ timeout: 5000 })
//         await $('span[data-name="deal-tab-item-TO-DO"]').click()
//         await $('div.reload i.i-refresh').click()
//         await expect($('div=' + testAutomationName)).toBeDisplayed()
//     })
//     it('Stop', async () => {
//         await $('div[data-name="sidebar-item-automations"] > a').click()
//         await $('span[data-name="profile-tab-item-My Automations List"]').waitForClickable({ timeout: 3000 })
//         await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
//         await $('span[data-name="profile-tab-item-My Automations List"]').click()
//         await $('span=' + testAutomationName).waitForClickable({ timeout: 6000 })
//         await $('span=' + testAutomationName).click()
//         await $('span[data-name="profile-tab-item-Assigned Contacts"]').waitForClickable({ timeout: 7000 })
//         await $('span[data-name="profile-tab-item-Assigned Contacts"]').click()
//         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').waitForClickable({ timeout: 5000 })
//         await $('table tbody tr:first-of-type td.mat-column-select div.custom-checkbox').click({ button: 0, x: -10, y: 0 })
//         await $('div[data-name="material-action-item-Stop Automation"]').click()
//         await $('app-unassign-bulk-automation').waitForDisplayed({ timeout: 2000 })
//         await $('app-unassign-bulk-automation button.btn-red').click()
//         await $('app-unassign-bulk-automation').waitForDisplayed({ reverse: true })
//         await expect($('table tbody tr:last-of-type td.mat-column-contact_name span')).not.toExist()
//     })
// })
describe('Delete Automation', () => {
    it('Delete', async () => {
        await goToPage('automations')
        await $('span[data-name="profile-tab-item-My Automations List"]').scrollIntoView()
        await $('span[data-name="profile-tab-item-My Automations List"]').click()
        await delay(5000)
        const robotContact = await $('span=robot-contact').isExisting()
        const robotDeal = await $('span=robot-deal').isExisting()
        const robotStage = await $('span=robot-stage').isExisting()
        if(robotContact) {
            await $('span=robot-contact').waitForClickable({ timeout: 5000 })
            await $('span=robot-contact').click()
            await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 7000 })
            await $('span[data-name="profile-tab-item-Activity"]').click()
            await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
            await $('button[data-action="automation-more"]').click()
            await $('button[data-action="automation-more-delete"]').click()
            await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 2000 })
            await $('button[data-action="confirm-downgrade"]').click()
        }
        if(robotDeal) {
            await $('span=robot-deal').click()
            await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 7000 })
            await $('span[data-name="profile-tab-item-Activity"]').click()
            await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
            await $('button[data-action="automation-more"]').click()
            await $('button[data-action="automation-more-delete"]').click()
            await $('button[data-action="confirm-downgrade"]').click()
        }
        if(robotStage) {
            await $('span=robot-stage').click()
            await $('span[data-name="profile-tab-item-Activity"]').waitForClickable({ timeout: 7000 })
            await $('span[data-name="profile-tab-item-Activity"]').click()
            await $('button[data-action="automation-more"]').waitForClickable({ timeout: 5000 })
            await $('button[data-action="automation-more"]').click()
            await $('button[data-action="automation-more-delete"]').click()
            await $('button[data-action="confirm-downgrade"]').click()
        }
        await delay(6000)
    })
    it.skip('Clear Task', async () => {
        await goToPage('contacts')
        await $('span=' + testContactName).click()
        await $('span[data-name="deal-tab-item-Tasks"]').waitForClickable({ timeout: 3000 })
        await $('span[data-name="deal-tab-item-Tasks"]').click()
        await delay(5000)
        await browser.waitUntil(async () => {
            await $('div.history-detail:first-of-type i.i-menu-more').waitForClickable({ timeout: 3000 })
            await $('div.history-detail:first-of-type i.i-menu-more').click()
            await $('div.history-detail:first-of-type i.i-trash').click()
            await delay(1000)
            const normal = await $('app-confirm').isDisplayedInViewport()
            if(normal) {
                await $('button[data-action="confirm-downgrade"]').click()
            } else {
                await $('span=All tasks').click()
                await $('button=OK').click()
            }
            await delay(3000)
            const stillRemaining = await $('div.history-detail:first-of-type').isExisting()
            return !stillRemaining
        }, {
            timeout: 200000,
            timeoutMsg: 'expect to remove all tasks'
        })
    })
    it.skip('Clear Deal', async () => {
        await goToPage('pipeline')
        await browser.waitUntil(async () => {
            await $('div[data-name="pipeline-stage-Lead"] div.deal:last-of-type').click()
            await delay(5000)
            await $('div[data-name="deal-actions"]').click()
            await $('app-deals-detail div.deal-info-panel div.action-menu button:last-of-type').waitForClickable({ timeout: 3000 })
            await $('app-deals-detail div.deal-info-panel div.action-menu button:last-of-type').click()
            await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 3000 })
            await $('button[data-action="confirm-downgrade"]').click()
            await delay(2000)
            await $('button[data-action="confirm-downgrade"]').waitForClickable({ timeout: 3000 })
            await $('button[data-action="confirm-downgrade"]').click()
            await delay(5000)
            const stillRemaining = await $('div=Kevin Deal').isExisting()
            return !stillRemaining
        }, {
            timeout: 200000,
            timeoutMsg: 'expect to remove all deals'
        })
    })
})
